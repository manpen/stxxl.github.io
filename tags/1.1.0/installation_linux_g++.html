<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Stxxl: Installation (Linux/g++ - Stxxl from version 0.9)</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="installation_linux_g++">Installation (Linux/g++ - Stxxl from version 0.9) </a></h1><h2><a class="anchor" name="download">
Download</a></h2>
<ul>
<li>Download the latest gzipped tarball from <a href="http://sourceforge.net/project/showfiles.php?group_id=131632&package_id=144407">SourceForge</a>.</li><li>Unpack in some directory executing: <code>tar</code> <code>zfxv</code> <code>stxxl.tgz</code> ,</li><li>Change to <code>stxxl</code> directory: <code>cd</code> <code>stxxl</code> ,</li><li>Change <code>make.settings.g++</code> or <code>make.settings.local</code> <a class="el" href="classfile.html" title="Defines interface of file.">file</a> according to your system configuration<ul>
<li><code>S<small>TXXL</small></code> root directory <code>STXXL_ROOT</code> variable( <code>directory_where_you_unpacked_the_tar_ball/stxxl</code> )</li><li>change USE_BOOST variable to yes if you want Stxxl to use <a href="http://www.boost.org">Boost</a> libraries (you should have Boost libraries already installed)</li><li>change BOOST_INCLUDE variable according to the Boost include path (if you set USE_BOOST to 'yes')</li><li>set OPT variable to -O3 or other g++ optimization level you like (optionally)</li><li>set DEBUG variable to -g or other g++ debugging option if you want to produce debug version of the Stxxl library or Stxxl examples</li></ul>
</li><li>Run: <div class="fragment"><pre class="fragment">make library_g++ </pre></div></li><li>Run: <div class="fragment"><pre class="fragment">make tests_g++ </pre></div> (optional, if you want to compile and run some test programs)</li></ul>
<p>
Programs using Stxxl can be compiled using g++ command line options from <code>compiler.options</code> <a class="el" href="classfile.html" title="Defines interface of file.">file</a>. The linking options you can find in <code>linker.options</code> <a class="el" href="classfile.html" title="Defines interface of file.">file</a>. Alternatively you can include <code>make.settings</code> <a class="el" href="classfile.html" title="Defines interface of file.">file</a> in your make files and use <code>STXXL_COMPILER_OPTIONS</code> and <code>STXXL_LINKER_OPTIONS</code> variables, defined therein. See also a shorter <code>stxxl.mk</code> <a class="el" href="classfile.html" title="Defines interface of file.">file</a> that contains Stxxl settings and can be included in your make files.<p>
For example: <br>
 <div class="fragment"><pre class="fragment">g++ -c my_example.cpp $(STXXL_COMPILER_OPTIONS) </pre></div> <br>
 <div class="fragment"><pre class="fragment">g++ my_example.o -o my_example.bin $(STXXL_LINKER_OPTIONS) </pre></div><p>
Before you try to run one of the <code>S<small>TXXL</small></code> examples (or your own <code>S<small>TXXL</small></code> program) you must configure the disk space that will be used as external memory for the library. For instructions how to do that, see the next section.<h2><a class="anchor" name="space">
Disk space</a></h2>
To get best performance with <code>S<small>TXXL</small></code> you should assign separate disks to it. These disks should be used by the library only. Since <code>S<small>TXXL</small></code> is developed to exploit disk parallelism, the performance of your external memory application will increase if you use more than one disk. But from how many disks your application can benefit depends on how "I/O bound" it is. With modern disk bandwidths about of 50-75 MB/s most of applications are I/O bound for one disk. This means that if you add another disk the running time will be halved. Adding more disks might also increase performance significantly.<h2><a class="anchor" name="filesystem">
Recommended file system</a></h2>
Our library take benefit of direct user memory - disk transfers (direct access) which avoids superfluous copies. We recommend to use the <code>XFS</code> <a class="el" href="classfile.html" title="Defines interface of file.">file</a> system <a href="http://oss.sgi.com/projects/xfs/">link</a> that gives good read and write performance for large files. Note that <a class="el" href="classfile.html" title="Defines interface of file.">file</a> creation speed of <code>XFS</code> is slow, so that disk files should be precreated.<h2><a class="anchor" name="configuration">
Disk configuration file</a></h2>
You must define the disk configuration for an <code>S<small>TXXL</small></code> program in a <a class="el" href="classfile.html" title="Defines interface of file.">file</a> named <code>'</code>.stxxl' that must reside in the same directory where you execute the program. You can change the default <a class="el" href="classfile.html" title="Defines interface of file.">file</a> name for the configuration <a class="el" href="classfile.html" title="Defines interface of file.">file</a> by setting the enviroment variable <code>STXXLCFG</code> .<p>
Each line of the configuration <a class="el" href="classfile.html" title="Defines interface of file.">file</a> describes a disk. A disk description uses the following format:<br>
 <code>disk=full_disk_filename</code>,capacity,access_method<p>
Description of the parameters:<ul>
<li><code>full_disk_filename</code> : full disk filename. In order to access disks S<small>TXXL</small> uses <a class="el" href="classfile.html" title="Defines interface of file.">file</a> access methods. Each disk is respresented as a <a class="el" href="classfile.html" title="Defines interface of file.">file</a>. If you have a disk that is mapped in unix to the path /mnt/disk0/, then the correct value for the <code>full_disk_filename</code> would be <code>/mnt/disk0/some_file_name</code> ,</li><li><code>capacity</code> : maximum capacity of the disk in megabytes</li><li><code>access_method</code> : <code>S<small>TXXL</small></code> has a number of different <a class="el" href="classfile.html" title="Defines interface of file.">file</a> access implementations for POSIX systems, choose one of them:<ul>
<li><code>syscall</code> uses <code>read</code> and <code>write</code> system calls which perform disk transfers directly on user memory pages without superfluous copy (currently the fastest method)</li><li><code>mmap</code> : performs disks transfers using <code>mmap</code> and <code>munmap</code> system calls</li><li><code>simdisk</code> : simulates timings of the IBM IC35L080AVVA07 disk, full_disk_filename must point to a <a class="el" href="classfile.html" title="Defines interface of file.">file</a> on a RAM disk partition with sufficient space</li></ul>
</li></ul>
<p>
See also example configuration <a class="el" href="classfile.html" title="Defines interface of file.">file</a> <code>'stxxl/config_example'</code> included into the tarball.<h2><a class="anchor" name="excreation">
Formatting external memory files</a></h2>
In order to get the maximum performance one should format disk files described in the configuration <a class="el" href="classfile.html" title="Defines interface of file.">file</a>, before running <code>S<small>TXXL</small></code> applications.<p>
The format utility is included into the set of <code>S<small>TXXL</small></code> utilities ( <code>utils/createdisks.bin</code> ). Run this utility for each disk you have defined in the disk configuration <a class="el" href="classfile.html" title="Defines interface of file.">file</a>. </div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Apr 21 06:44:37 2010 for Stxxl by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
